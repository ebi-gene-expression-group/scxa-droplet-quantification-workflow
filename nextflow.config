process {
    executor='slurm'
    queue="$SCXA_HPC_QUEUE"
    clusterOptions="$SCXA_HPC_OPTIONS"
    time = '7 d'
    memory = '8 GB'
    queueSize=500
    exitReadTimeout='100000 sec'
    pollInterval = '5sec'

    withName: 'download_fastqs' {
        //clusterOptions = "-g /scxa_ena_download"
        // No equivalent of -g option in LSF for Slurm. We simulate it adding a tag.
        clusterOptions = "--job-name=scxa_ena_download"
    }
}


conda {
    cacheDir = "$SCXA_WORKFLOW_ROOT/envs"
    createTimeout = "30 min"
    useMamba = true
}

params {

    downloadMethod = 'http'
    maxConcurrentDownloads = 10
    minMappingRate = 12
    minCbFreq = 10    

    'emptyDrops' {
        lower = 100
        nIters = 1000
        testAmbient = 'FALSE'
        filterEmpty = 'TRUE'
        filterFdr = '0.01'
        libType = 'ISR'
    }

    '10xv2' {
        alevinType = 'chromium'
        barcodeLength = 16
        umiLength = 10
        end = '5'
        libType = 'ISR'
    }

    'drop-seq' {
        alevinType = 'dropseq'
        barcodeLength = 12
        umiLength = 8
        end = '5'
        libType = 'ISR'
    }
    
    'seq-well' {
        alevinType = 'dropseq'
        barcodeLength = 12
        umiLength = 8
        end = '5'
        libType = 'ISR'
    }

    '10xv3' {
        alevinType = 'chromiumV3'
        barcodeLength = 16
        umiLength = 12
        end = '5'
        libType = 'ISR'
        whitelist = "$SCXA_WORKFLOW_ROOT/conf/3M-february-2018_onecolumn.txt"
    }
    
    '10x5prime' {
        alevinType = 'custom'
        barcodeLength = 16
        umiLength = 10
        end = '5'
        libType = 'ISF'
    }

    salmon {
        index {
            kmerSize = 31
        }
    }

}
